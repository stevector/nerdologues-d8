# https://circleci.com/docs/configuration#machine
machine:
  php:
    # https://circleci.com/docs/environment#php
    version: 5.5.11

dependencies:
  cache_directories:
    - ~/.composer/cache
  post:
    -  cd private/behat-testing/ && composer install
test:
  pre:
    - drush si config_installer -y
  override:
    # Run phpcs
    # @todo, figure out why running these from phpcs.sh no longer causes
    # circle fails.
    # Circle did fail here: https://circleci.com/gh/stevector/nerdologues-d8/4
    # But not here: https://circleci.com/gh/stevector/nerdologues-d8/18
    - cd private/behat-testing/  && ./bin/phpcs --report=full --extensions=php,module,inc,theme,info --standard=vendor/drupal/coder/coder_sniffer/Drupal/  ../../modules/custom
    - cd private/behat-testing/  && ./bin/phpcs --report=full --extensions=php,module,inc,theme,info --standard=vendor/drupal/coder/coder_sniffer/Drupal/  ../../themes/custom
